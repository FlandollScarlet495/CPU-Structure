# 命令セット

## ロード系命令

| 命令            | 説明                 | オペランド例                                              | 備考                  |
| --------------- | ------------------- | -------------------------------------------------------- | --------------------- |
| **LOAD**        | 8bitレジスタロード   |  `LOAD reg, [HL]`                                        | MEM可能                |
| **STORE**       | 8bitレジスタ保存     |  `STORE reg, [HL]`                                       | MEMアクセスはHLのみ    |
| **LOAD16**      | 16bitレジスタロード  |  `LOAD16 reg16, [HL]`                                    | ペアレジスタ・MEM可能   |
| **STORE16**     | 16bitレジスタ保存    |  `STORE16 reg16, [HL]`                                   | MEMアクセスはHLのみ    |
| **MOV / MOV16** | レジスタ間コピー     |  `MOV reg, reg` / `MOV16 reg16, reg16`                    | 8bit / 16bit         |

---

## 算術演算系命令

| 命令                      | 説明              | オペランド例                   | 備考                                           |
| ------------------------- | --------------   | ----------------------------- | ---------------------------------------------- |
| **ADD / SUB / MUL / DIV** | 8bit演算         | `ADD reg, imm` / `SUB imm, reg` | Aに即値orレジスタ加算・減算・乗算・除算、FLAGS更新（NフラグADD=1/SUB=0） |
| **ADD16 / SUB16**         | 16bit演算        | `ADD16 reg16, reg16` / `SUB16 reg16, reg16` | FLAGS更新                           |
| **INC / DEC**             | インクリメント/デクリメント | `INC reg` / `DEC reg`  | FLAGS更新                                       |
| **INC16 / DEC16**         | インクリメント16bit/デクリメント16bit | `INC reg16` / `DEC reg16` | FLAGS更新                          |
| **AND / OR / XOR / NOT**  | 8bit論理演算      | `AND reg, reg` / `XOR reg, reg` | FLAGS更新                                       |
| **AND16 / XOR16**         | 16bit論理演算     | `AND16 reg16, reg16` / `XOR16 reg16, reg16` | FLAGS更新                           |

---

## reg, reg16仕様

|  Reg 8  | オペランド |
| ------- | --------- |
|    A    |   0000    |
|    B    |   0001    |
|    C    |   0010    |
|    D    |   0011    |
|    E    |   0100    |
|    F    |   0101    |
|    G    |   0110    |
|    H    |   0111    |
|    L    |   1000    |

---

|  Reg16  | オペランド |
| ------- | --------- |
|   BC    |   1001    |
|   DE    |   1010    |
|   FG    |   1011    |
|   HL    |   1100    |
|    X    |   1101    |
|    Y    |   1110    |
|    J    |   1111    |

---

## 比較系命令

| 命令     | 説明  | オペランド例 | 備考    |
| ------- | ------ | ---------- | ------- |
| **CMP** | A+Bの比較 | `CMP A, B, FlagsReg` | FLAGS更新 |
| **CNP** | A-Bの比較 | `CNP A, B, FlagsReg` | FLAGS更新 |

---

## ジャンプ系命令

| 命令                         | 説明           | オペランド例                                                      | 備考           |
| --------------------------- | -------------- | -----------------------------------------------------------      | -------------- |
| **JMP / JMP16**             | 無条件ジャンプ  | `JMP HL` / `JMP16 HL`                                            | 8bit/16bit対応 |
| **J[FlagReg]**              | 条件ジャンプ    | `JZ H`   / `JH H`                                                | 8bit正方向条件ジャンプ |
| **JN[FlagReg]**             | 条件ジャンプ(N) | `JNZ H`  / `JNH H`                                               | 8bit負方向条件ジャンプ |
| **J[FlagReg]16**            | 16bit条件ジャンプ | `JZ16 H` / `JH16 H`                                            | 16bit正方向条件ジャンプ |
| **JN[FlagReg]16**           | 16bit条件ジャンプ(N) | `JNZ16 H` / `JNH16 H`                                       | 16bit負方向条件ジャンプ |

---

## FlagsReg仕様

| FlagReg | オペランド |
| ------- | --------- |
|    Z    |    000    |
|    I    |    001    |
|    O    |    010    |
|    N    |    011    |
|    Q    |    100    |
|    C    |    101    |
|    H    |    110    |
|    S    |    111    |

---

## シフト・ローテート系命令

| 命令            | 説明       | オペランド例            | 備考             |
| ------------- | -------- | ----------------- | -------------- |
| **ROL / ROR** | 左/右ローテート | `ROL A` / `ROR A` | A << imm, A >> imm (循環します) |
| **SHL / SHR** | 左/右シフト   | `SHL A` / `SHR A` | A << imm, A >> imm |

---

## スタック操作系命令

| 命令             | 説明     | オペランド例             | 備考   |
| -------------- | ------ | ------------------ | ---- |
| **PUSH / POP** | スタック操作 | `PUSH A` / `POP A` | SP操作 |

---

## I/O操作系命令

| 命令           | 説明         | オペランド例               | 備考         |
| ------------ | ---------- | ---------------------------- | ------------ |
| **IN / OUT** | I/Oポートアクセス | `IN A, J` / `OUT J, A` | Iフラグセット |

---

## メモリアクセス制約

- HLペアでRAMアドレスのみアクセス可能。

- ROMやI/O領域へのHLアクセスは禁止（弾かれる）。

---
